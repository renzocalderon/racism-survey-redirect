Always show details

Copy
# Update the redirect page to use the correct format: d[ref]=...
survey_url = "https://ee.kobotoolbox.org/x/9DqjMPCB"
redirect_html_final = f"""
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Redirecting to Survey...</title>
    <script>
        window.onload = function() {{
            const referrer = document.referrer || 'unknown';
            const encodedRef = encodeURIComponent(referrer);
            const surveyURL = "{survey_url}?d[ref]=" + encodedRef;
            window.location.href = surveyURL;
        }};
    </script>
</head>
<body>
    <p>Redirecting you to the survey...</p>
</body>
</html>
"""

# Save the corrected redirect file
file_path = "/mnt/data/kobo_redirect_with_dref.html"
with open(file_path, "w", encoding="utf-8") as f:
    f.write(redirect_html_final)

file_path
